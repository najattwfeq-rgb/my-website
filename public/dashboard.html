<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة التحكم | Najat Ali</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
         :root {
            --primary-gradient: linear-gradient(135deg, #2563EB 0%, #7C3AED 100%);
            --hover-gradient: linear-gradient(135deg, #1d4ed8 0%, #6d28d9 100%);
            --primary-color: #2563EB; --bg-color: #F8FAFC;
        }
        body { font-family: 'Tajawal', sans-serif; background-color: var(--bg-color); color: #1E293B; margin: 0; }

        nav {
            background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(12px);
            padding: 15px 5%; display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.03);
        }
        .logo { font-weight: 800; font-size: 22px; background: var(--primary-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; display: flex; align-items: center; gap: 10px; }
        .logo i { -webkit-text-fill-color: initial; color: var(--primary-color); }

        .btn {
            padding: 10px 24px; border-radius: 50px; font-weight: 700; font-size: 14px; transition: all 0.3s ease;
            display: inline-flex; align-items: center; justify-content: center; gap: 8px; cursor: pointer; border: none; text-decoration: none;
        }
        .btn-main { background: var(--primary-gradient); color: white; box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3); width: 100%; padding: 14px; font-size: 16px; }
        .btn-main:hover { background: var(--hover-gradient); transform: translateY(-2px); }
        .btn-outline { background: transparent; color: var(--primary-color); border: 2px solid var(--primary-color); }
        .btn-outline:hover { background: var(--primary-color); color: white; transform: translateY(-2px); }

        .main-content { max-width: 1000px; margin: 40px auto; padding: 0 20px; display: flex; flex-direction: column; gap: 30px; }
        .dashboard-card { background: white; padding: 30px; border-radius: 24px; box-shadow: 0 10px 40px rgba(0,0,0,0.03); border: 1px solid #F1F5F9; }
        h2 { text-align: center; margin-bottom: 30px; font-weight: 800; color: #1E293B; display: flex; align-items: center; justify-content: center; gap: 10px; }
        input { width: 100%; padding: 14px; margin-bottom: 15px; border: 2px solid #E2E8F0; border-radius: 12px; font-family: inherit; outline: none; box-sizing: border-box; transition: 0.3s; background: #F8FAFC; }
        input:focus { border-color: var(--primary-color); background: white; }

        .product-list { list-style: none; padding: 0; margin-top: 30px; }
        .product-card { background: #F8FAFC; padding: 15px; margin-bottom: 10px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #E2E8F0; transition: 0.3s; }
        .product-card:hover { border-color: var(--primary-color); background: white; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        
        /* تنسيق جدول الرسائل */
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th { background: #F1F5F9; padding: 15px; color: var(--primary-color); font-weight: 800; text-align: right; border-radius: 8px; }
        td { padding: 15px; border-bottom: 1px solid #E2E8F0; vertical-align: middle; font-size: 14px; }
        tr:last-child td { border-bottom: none; }
        .msg-cell { max-width: 250px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        .btn-icon { width: 32px; height: 32px; border-radius: 8px; border: none; cursor: pointer; display: flex; justify-content: center; align-items: center; margin-left: 5px; transition: 0.2s; }
        .delete { background: #FEF2F2; color: #EF4444; } .delete:hover { background: #EF4444; color: white; }
        .edit { background: #FFF7ED; color: #F59E0B; } .edit:hover { background: #F59E0B; color: white; }

        footer { text-align: center; padding: 30px; color: #94A3B8; font-size: 14px; }
        @media (max-width: 768px) { .product-card { flex-direction: column; text-align: center; gap: 10px; } nav { flex-direction: column; gap: 15px; } .table-container { overflow-x: auto; } table { min-width: 600px; } }
    </style>
</head>
<body>
    <nav>
        <div class="logo"><i class="fa-solid fa-gauge-high"></i> لوحة التحكم</div>
        <a href="index.html" class="btn btn-outline"><i class="fa-solid fa-house"></i> الموقع</a>
    </nav>

    <div class="main-content">
        <div class="dashboard-card">
            <h2><i class="fa-solid fa-box-open"></i> إدارة المنتجات</h2>
            <input type="text" id="name" placeholder="اسم المنتج">
            <input type="number" id="price" placeholder="السعر">
            <input type="text" id="category" placeholder="القسم">
            <button id="mainBtn" class="btn btn-main"><i class="fa-solid fa-plus"></i> حفظ المنتج</button>
            <ul id="productsList" class="product-list"></ul>
        </div>

        <div class="dashboard-card">
            <h2><i class="fa-solid fa-comments"></i> رسائل العملاء</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>الاسم</th>
                            <th>الرسالة</th>
                            <th>التاريخ</th>
                            <th>حذف</th>
                        </tr>
                    </thead>
                    <tbody id="messagesTable">
                        </tbody>
                </table>
            </div>
        </div>
    </div>

    <footer>&copy; 2026 Najat Ali Dashboard</footer>

    <script>
        // ==============================
        // 1. كود إدارة المنتجات (Products)
        // ==============================
        let title = document.getElementById('name');
        let price = document.getElementById('price');
        let category = document.getElementById('category');
        let submit = document.getElementById('mainBtn');
        let productsList = document.getElementById('productsList');
        
        let mood = 'create';
        let tmp;
        let dataPro = localStorage.product ? JSON.parse(localStorage.product) : [];

        submit.onclick = function(){
            if(title.value === '' || price.value === ''){
                 Swal.fire({ icon: 'warning', title: 'تنبيه', text: 'يرجى إدخال اسم المنتج والسعر!' });
                 return;
            }
            let newPro = { title: title.value, price: price.value, category: category.value }
            if(mood === 'create'){
                dataPro.push(newPro);
                Swal.fire({ icon: 'success', title: 'تم!', text: 'تمت إضافة المنتج', timer: 1500, showConfirmButton: false });
            } else {
                dataPro[tmp] = newPro;
                mood = 'create';
                submit.innerHTML = '<i class="fa-solid fa-plus"></i> حفظ المنتج';
                submit.style.background = 'linear-gradient(135deg, #2563EB 0%, #7C3AED 100%)';
                Swal.fire({ icon: 'success', title: 'تم!', text: 'تم تعديل المنتج', timer: 1500, showConfirmButton: false });
            }
            localStorage.setItem('product', JSON.stringify(dataPro));
            clearData();
            showData();
        }

        function clearData(){ title.value = ''; price.value = ''; category.value = ''; }

        function showData(){
            let table = '';
            for(let i = 0; i < dataPro.length; i++){
                table += `
                <li class="product-card">
                    <div style="flex:1; font-weight:bold;">${dataPro[i].title}</div>
                    <div style="flex:1; color: var(--primary-color);">${dataPro[i].price} $</div>
                    <div style="flex:1; color: #64748B;">${dataPro[i].category}</div>
                    <div>
                        <button onclick="updateData(${i})" class="btn-icon edit"><i class="fa-solid fa-pen"></i></button>
                        <button onclick="deleteData(${i})" class="btn-icon delete"><i class="fa-solid fa-trash"></i></button>
                    </div>
                </li>`;
            }
            productsList.innerHTML = dataPro.length > 0 ? table : '<li style="text-align:center; color:#999;">لا توجد منتجات</li>';
        }

        function deleteData(i){
            Swal.fire({ title: 'حذف المنتج؟', icon: 'warning', showCancelButton: true, confirmButtonText: 'نعم', cancelButtonText: 'لا' }).then((result) => {
                if (result.isConfirmed) {
                    dataPro.splice(i, 1);
                    localStorage.product = JSON.stringify(dataPro);
                    showData();
                }
            })
        }

        function updateData(i){
            title.value = dataPro[i].title;
            price.value = dataPro[i].price;
            category.value = dataPro[i].category;
            submit.innerHTML = '<i class="fa-solid fa-pen"></i> تحديث';
            submit.style.background = '#F59E0B';
            mood = 'update';
            tmp = i;
            scroll({top:0, behavior:'smooth'});
        }

        showData(); // تشغيل المنتجات

        // ==============================
        // 2. كود إدارة الرسائل (Messages)
        // ==============================
        let msgData = localStorage.getItem('messages') ? JSON.parse(localStorage.getItem('messages')) : [];

        function showMessages(){
            let table = '';
            for(let i = 0; i < msgData.length; i++){
                table += `
                <tr>
                    <td><strong>${msgData[i].name}</strong><br><small style="color:#64748B">${msgData[i].email}</small></td>
                    <td class="msg-cell" title="${msgData[i].msg}">${msgData[i].msg}</td>
                    <td>${msgData[i].date}</td>
                    <td>
                        <button onclick="deleteMessage(${i})" class="btn-icon delete"><i class="fa-solid fa-trash"></i></button>
                    </td>
                </tr>`;
            }
            document.getElementById('messagesTable').innerHTML = msgData.length > 0 ? table : '<tr><td colspan="4" style="text-align:center; padding:20px; color:#999;">لا توجد رسائل جديدة</td></tr>';
        }

        function deleteMessage(i){
            Swal.fire({ title: 'حذف الرسالة؟', icon: 'warning', showCancelButton: true, confirmButtonText: 'نعم', cancelButtonText: 'لا' }).then((result) => {
                if (result.isConfirmed) {
                    msgData.splice(i, 1);
                    localStorage.setItem('messages', JSON.stringify(msgData));
                    showMessages();
                    Swal.fire('تم!', 'تم حذف الرسالة.', 'success');
                }
            })
        }

        showMessages(); // تشغيل الرسائل
    </script>
</body>
</html>